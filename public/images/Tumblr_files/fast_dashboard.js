(function(p,e,d){function q(){}function m(t){var s=Array.prototype.slice;var r=s.call(arguments,1);return function(){return t.apply(this,r.concat(s.call(arguments)))}}function o(r){return(r!==null&&r!==undefined)?(("length" in r)?r:[r]):[]}function i(r){if(r&&typeof r.then==="function"){return r}else{if(typeof r==="function"){return function(){return i(r.apply(this,arguments))}}else{return e.Deferred()[r===false?"reject":"resolve"](r).promise()}}}function f(r,s){return p.compact(p.map(o(s),function(t){return n(r,t)}))}function n(r,t){var s;return(s=t.parentNode)?((s!==r)?n(r,s):t):false}var a=(function(){var u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function t(w){return(w.nodeName==="IMG")?[w]:p.toArray(w.getElementsByTagName("img"))}function s(w){var x=w.src;if(x&&x!==u){w.src=u;return{img:w,src:x}}}function r(w){return(w.img.src=w.src,w.img)}return function v(w){var x=p.chain(o(w)).map(t).flatten().map(s).compact().value();return(x.length)?m(p.map,x,r):q}})();var h=(function(){function t(v){var u=p.toArray(v.querySelectorAll("[data-background-image]"));v.getAttribute("data-background-image")&&u.push(v);return u}function s(v){var u=v.getAttribute("data-background-image");if(u){v.style.backgroundImage="url("+u+")";v.removeAttribute("data-background-image");return v}}return function r(u){return p.chain(o(u)).map(t).flatten().map(s).compact().value()}})();function j(u,s){var t=s.options.onBeforeAttach;var r=s.options.onAfterAttach;return p.map(u,function(w){var x=e.data(w);if(x.exclude){return w}if(!x.reattach){return w}t.call(s,w,x).then(function v(){x.reattach();x.reattach=null;r.call(s,w,x)})})}function c(t,r){var s=r.options.onViewable;p.each(t,function(u){var v=e.data(u);if(v.exclude){return}if(v.promise&&v.promise.state&&v.promise.state()==="pending"){return u}s.call(r,u,v,h)})}function b(v,s){var u=s.options.styles;var r=s.options.onBeforeDetach;var t=s.options.onAfterDetach;return p.chain(v).map(function(x){var y=e.data(x);if(y.exclude){return x}if(y.promise&&y.promise.state&&y.promise.state()==="pending"){return x}(y.promise=r.call(s,x,y)).then(function z(A){y.reattach=l(x,u,(A==="hide"));y.promise=null;t.call(s,x,y)},function w(){y.promise=null});return x}).tap(function(){v=null}).value()}function l(w,y,v){var u=p.toArray(w.children);var r=(function(){var z=p.pick(w.style,p.keys(y));p.extend(w.style,y,{height:e(w).height()+"px",width:e(w).width()+"px"});return function(){p.extend(w.style,z,{height:"",width:""})}})();var t=p.map(u,v?function(A){var z=A.style.display;A.style.display="none";return function(){A.style.display=z;return A}}:function(z){w.removeChild(z);return function(){w.appendChild(z);return z}});var x=a(u);u=null;y=null;return function s(){x();r();p.each(t,function(z){z()})}}function k(C){var D=-(C.windowHeight*this.options.PAGES_ABOVE);var y=C.windowHeight+(C.windowHeight*this.options.PAGES_BELOW);var s=this.container.children;var t=[];var w=(C.windowScrollY/C.documentHeight);(w>=0)||(w=0);(w<=1)||(w=1);var z=Math.floor(s.length*w);var v;var r;var A;v=z;while((v>=0)&&(r=s[v--])&&(A=r.getBoundingClientRect())&&(D<A.bottom)){if(r.nodeType!==1){continue}if(A.top<y){t.push(r)}}v=z+1;while((r=s[v++])&&(A=r.getBoundingClientRect())&&(A.top<y)){if(r.nodeType!==1){continue}if(D<A.bottom){t.push(r)}}var B=p.difference(this.attached,t);if(B.length){b(B,this)}var x=p.intersection(t,this.detached);if(x.length){j(x,this)}var u=p.difference(t,this.attached);if(u.length){c(u,this)}this.detached=p.without.apply(null,[this.detached].concat(x)).concat(B);this.attached=t}function g(s){var r=e(s.container).get(0);if(!r){throw"GhostList: Bad container form."}if(s.eventor){s.eventor.on("DOMEventor:flatscroll",p.bind(k,this))}else{throw"GhostList depends on DOMEventor:flatscroll."}this.container=r;this.attached=[];this.detached=[];this.options={styles:s.styles||{},onBeforeDetach:i(s.onBeforeDetach||q),onAfterDetach:s.onAfterDetach||q,onBeforeAttach:i(s.onBeforeAttach||q),onAfterAttach:s.onAfterAttach||q,onViewable:s.onViewable||q,PAGES_ABOVE:(s.pages&&s.pages[0]!==undefined)?s.pages[0]:1,PAGES_BELOW:(s.pages&&s.pages[1]!==undefined)?s.pages[1]:1};if(p.isFunction(s.initialize)){s.initialize.call(this)}}g.prototype={exclude:function(r){return p.map(f(this.container,r),function(s){return(e.data(s,"exclude",true),s)})},unexclude:function(r){return p.map(f(this.container,r),function(s){return(e.data(s,"exclude",false),s)})},clean:function(){},remove:function(){},relayout:function(){}};d.GhostList=g})(_,jQuery,Tumblr);
(function(b,c,a){c(function(){a.dashboardGL=new Tumblr.GhostList({container:"#posts",pages:[1,2],eventor:Tumblr.Events,styles:{backgroundColor:"#ffffff",borderRadius:"6px"},initialize:function(){this.exclude(this.container.querySelector("#new_post_buttons"))},onBeforeDetach:function(d,e){return"hide"},onAfterDetach:function(){},onBeforeAttach:function(){},onAfterAttach:function(d,e){}})})})(_,jQuery,Tumblr);